<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Feedback Digitalisasi Aduan Damkar</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
    .emoji-option {
        font-size: 2rem;
        cursor: pointer;
        transition: transform 0.2s;
    }
    .emoji-option:hover {
        transform: scale(1.3);
    }
    .selected {
        transform: scale(1.5);
    }
</style>
</head>
<body class="bg-gradient-to-r from-blue-100 to-purple-100 font-sans min-h-screen flex items-center justify-center">

<div class="w-full max-w-3xl bg-white rounded-3xl shadow-2xl p-10 relative">
    <div class="text-center mb-8">
        <h1 class="text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-700 to-purple-700">
            Feedback Digitalisasi Aduan Damkar
        </h1>
        <p class="mt-2 text-gray-600">Kami menghargai pendapat Anda untuk meningkatkan layanan kami</p>
    </div>

    <form id="feedbackForm" class="space-y-6">
        <!-- Nama & Alamat -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
                <label class="block text-gray-700 font-semibold mb-2">Nama Lengkap</label>
                <input type="text" name="nama" placeholder="Masukkan nama Anda" required
                    class="w-full px-4 py-2 border-2 border-gray-300 rounded-xl focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition duration-300">
            </div>
            <div>
                <label class="block text-gray-700 font-semibold mb-2">Alamat</label>
                <input type="text" name="alamat" placeholder="Masukkan alamat Anda" required
                    class="w-full px-4 py-2 border-2 border-gray-300 rounded-xl focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition duration-300">
            </div>
        </div>

        <!-- Nomor WA -->
        <div>
            <label class="block text-gray-700 font-semibold mb-2">Nomor WhatsApp</label>
            <input type="tel" name="wa" placeholder="Contoh: 08123456789" required
                class="w-full px-4 py-2 border-2 border-gray-300 rounded-xl focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition duration-300">
        </div>

        <!-- Pertanyaan Fitur -->
        <div>
            <label class="block text-gray-700 font-semibold mb-2">
                Apakah fitur digitalisasi aduan ini memudahkan pengaduan?
            </label>
            <div class="flex space-x-4 text-2xl justify-center" id="kemudahan">
                <span class="emoji-option" data-value="😞">😞</span>
                <span class="emoji-option" data-value="😐">😐</span>
                <span class="emoji-option" data-value="😊">😊</span>
                <span class="emoji-option" data-value="😄">😄</span>
            </div>
        </div>

        <!-- Pertanyaan Respon -->
        <div>
            <label class="block text-gray-700 font-semibold mb-2">
                Apakah proses respon Damkar sudah cepat?
            </label>
            <div class="flex space-x-4 text-2xl justify-center" id="respon">
                <span class="emoji-option" data-value="😞">😞</span>
                <span class="emoji-option" data-value="😐">😐</span>
                <span class="emoji-option" data-value="😊">😊</span>
                <span class="emoji-option" data-value="😄">😄</span>
            </div>
        </div>

        <!-- Saran -->
        <div>
            <label class="block text-gray-700 font-semibold mb-2">Saran / Masukan</label>
            <textarea name="saran" rows="4" placeholder="Tuliskan saran Anda..."
                class="w-full px-4 py-2 border-2 border-gray-300 rounded-xl focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition duration-300"></textarea>
        </div>

        <!-- Tombol -->
        <button type="submit"
            class="w-full py-3 bg-gradient-to-r from-blue-700 to-purple-700 text-white font-bold rounded-2xl shadow-lg hover:from-purple-700 hover:to-blue-700 transform hover:-translate-y-1 transition-all duration-300">
            Kirim Feedback
        </button>
    </form>
</div>

<script>
let kemudahanValue = '';
let responValue = '';

document.querySelectorAll('#kemudahan .emoji-option').forEach(el => {
    el.addEventListener('click', () => {
        kemudahanValue = el.dataset.value;
        document.querySelectorAll('#kemudahan .emoji-option').forEach(e => e.classList.remove('selected'));
        el.classList.add('selected');
    });
});

document.querySelectorAll('#respon .emoji-option').forEach(el => {
    el.addEventListener('click', () => {
        responValue = el.dataset.value;
        document.querySelectorAll('#respon .emoji-option').forEach(e => e.classList.remove('selected'));
        el.classList.add('selected');
    });
});

document.getElementById("feedbackForm").addEventListener("submit", function(event){
    event.preventDefault();

    const nama = event.target.nama.value;
    const alamat = event.target.alamat.value;
    const wa = event.target.wa.value;
    const saran = event.target.saran.value;

    if (!kemudahanValue || !responValue) {
        alert('Silakan pilih emoji untuk semua pertanyaan!');
        return;
    }

    const message = `*Feedback Digitalisasi Aduan Damkar*\n\nNama: ${nama}\nAlamat: ${alamat}\nWA: ${wa}\nKemudahan: ${kemudahanValue}\nRespon: ${responValue}\nSaran: ${saran}`;
    const phoneNumber = "6288225343353"; // ubah ke nomor WA tujuan
    const whatsappURL = `https://wa.me/${phoneNumber}?text=${encodeURIComponent(message)}`;
    window.open(whatsappURL, '_blank');

    const data = { nama, alamat, wa, kemudahan: kemudahanValue, respon: responValue, saran };
    fetch("https://script.google.com/macros/s/AKfycbwtdZrsW7GMrA-9u-8Aa2k_jknm3MBlp3r0f-IC2up1UyS_AOTpsRESeEFAw6S2DV_s/exec", { // ganti dengan URL Apps Script
        method: "POST",
        body: JSON.stringify(data)
    })
    .then(res => res.text())
    .then(res => console.log("Data berhasil masuk spreadsheet:", res))
    .catch(err => console.error("Gagal kirim ke spreadsheet:", err));
});
</script>

</body>

</html>

